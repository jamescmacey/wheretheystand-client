import{_ as D}from"./PageHeader-953c8854.mjs";import{p as I,a as P,_ as F}from"./VoteSummary-88b25d4d.mjs";import{_ as H,S as V,g as q,p as A,r as w,o as t,c as s,a,w as u,b as l,h as o,F as g,i as x,l as c,e as i,t as h,d as N,f as B}from"./entry-6994fce1.mjs";import{_ as O}from"./PartyCard-efa31445.mjs";import{_ as j}from"./PersonCard-945796f8.mjs";import{_ as E}from"./PersonList-0925a27a.mjs";import{f as W}from"./index-f958d92a.mjs";import"./ColourDot-36430abb.mjs";const z={name:"Vote",setup(){return{votesStore:V()}},created(){this.votesStore.fetch(this.$route.params.id)},methods:{formatDate(r){return q(A(r,"yyyy-MM-dd",new Date),"d MMMM yyyy")}},data(){return{listMode:"vote",sortFunction:function(r,_){if(r.person&&_.person)return r.person.last_name.toLowerCase()<_.person.last_name.toLowerCase()?-1:r.person.last_name.toLowerCase()==_.person.last_name.toLowerCase()?0:1;if(r.person&&!_.person)return 1;if(_.person&&!r.person)return-1;if(!r.person&&!_.person)return r.contribution>_.contribution?-1:r.contribution<_.contribution?1:r.party.display_name.toLowerCase()<_.party.display_name.toLowerCase()?-1:r.party.display_name.toLowerCase()==_.party.display_name.toLowerCase()?0:1}}},computed:{vote(){return this.votesStore.byID(this.$route.params.id)},readingOrdinal(){return this.vote.reading+{1:"st reading",2:"nd reading",3:"rd reading"}[this.vote.reading]},ayes(){return this.vote.positions.filter(r=>{if(r.position=="y")return!0}).sort(this.sortFunction)},noes(){return this.vote.positions.filter(r=>{if(r.position=="n")return!0}).sort(this.sortFunction)},abstentions(){return this.vote.positions.filter(r=>{if(r.position=="a")return!0}).sort(this.sortFunction)},absences(){return this.vote.positions.filter(r=>{if(r.position=="x")return!0}).sort(this.sortFunction)},relativeDate(){return W(I(this.vote.last_retrieved))+" ago"}}},G={key:0,id:"vote-view"},J={class:"container mt-3"},K=l("h4",null,"Summary",-1),Q={class:"row"},R={class:"col-12"},U={key:0},X={key:1},Y=l("br",null,null,-1),Z=l("h5",{class:"mt-3"},"Vote type",-1),$={key:2},ee=i(),te=l("strong",null,"Personal vote: ",-1),se=i(" MPs' votes were cast and recorded individually. "),oe={key:3},ne=i(),re=l("strong",null,"Split-party vote: ",-1),ae=i(" The vote was conducted as a party vote, but one or more parties opted to split their vote across multiple positions. The position of each MP within those parties is recorded individually. "),le={key:4},ce=i(),ie=l("strong",null,"Party vote: ",-1),_e=i(" Parties cast one vote on behalf of all their MPs. "),ue=l("hr",null,null,-1),de={class:"row"},he={class:"col-12 col-xl-6"},ye=i(" View Hansard record"),pe={class:"col-12 col-xl-6 text-xl-end"},me={key:0},ve={key:0,class:"mt-3"},fe={key:1,class:"row"},ke={key:0},ge={key:2,class:"mt-3"},xe={key:3,class:"row"},be={key:0},we={key:4,class:"mt-3"},Te={key:5,class:"row"},Le={key:0},Ce={key:6,class:"mt-3"},Se={key:7,class:"row"},Me={key:0},De={key:1},Ie={key:0},Pe={key:0,class:"mt-3"},Fe={key:1,class:"mt-3"},He={key:3,class:"mt-3"},Ve={key:5,class:"mt-3"},qe={class:"col-12"},Ae={class:"text-muted"},Ne={key:0},Be={key:1},Oe={key:2};function je(r,_,Ee,We,T,e){const y=w("Meta"),L=w("Head"),C=D,S=P,m=w("FontAwesomeIcon"),M=B,b=F,p=N,v=O,f=j,k=E;return e.vote?(t(),s("div",G,[a(L,null,{default:u(()=>[a(y,{name:"twitter:title",content:e.vote.name+"- WhereTheyStand"},null,8,["content"]),e.vote.question_text?(t(),c(y,{key:0,name:"twitter:description",content:e.vote.question_text},null,8,["content"])):o("",!0),e.vote.question_text?(t(),c(y,{key:1,name:"description",content:e.vote.question_text},null,8,["content"])):o("",!0),a(y,{property:"og:title",content:e.vote.name+"- WhereTheyStand"},null,8,["content"]),e.vote.question_text?(t(),c(y,{key:2,property:"og:description",content:e.vote.question_text},null,8,["content"])):o("",!0)]),_:1}),a(C,{pageTitle:e.vote.bill.name,pageSubtitle:e.readingOrdinal,pageDate:e.vote.vote_date,backLink:"/bills/"+e.vote.bill.id,backText:e.vote.bill.name},null,8,["pageTitle","pageSubtitle","pageDate","backLink","backText"]),l("div",J,[a(S,{vote:e.vote,countsOnly:!0},null,8,["vote"]),K,l("div",Q,[l("div",R,[a(p,null,{default:u(()=>[e.vote.question_text?(t(),s("span",U,h(e.vote.question_text),1)):o("",!0),e.vote.outcome_text?(t(),s("strong",X,[Y,a(m,{icon:["fas","arrow-right"]}),i(" "+h(e.vote.outcome_text),1)])):o("",!0),Z,e.vote.type=="personal"?(t(),s("span",$,[a(m,{icon:["fas","person"]}),ee,te,se])):o("",!0),e.vote.type=="party"&&e.vote.contains_split_votes?(t(),s("span",oe,[a(m,{icon:["fas","people-group"]}),ne,re,ae])):o("",!0),e.vote.type=="party"&&!e.vote.contains_split_votes?(t(),s("span",le,[a(m,{icon:["fas","people-group"]}),ce,ie,_e])):o("",!0),ue,l("div",de,[l("div",he,[a(M,{link:"https://www.parliament.nz/en/pb/hansard-debates/rhr/document/"+e.vote.document_id},{default:u(()=>[ye]),_:1},8,["link"])]),l("div",pe,[a(b,{class:"ms-xl-2 me-xl-0",resourceType:"vote",fileType:"xlsx",resourceId:e.vote.id},null,8,["resourceId"]),a(b,{class:"ms-xl-2 me-xl-0",resourceType:"vote",fileType:"csv",resourceId:e.vote.id},null,8,["resourceId"]),a(b,{class:"ms-xl-2 me-xl-0",resourceType:"vote",fileType:"json",resourceId:e.vote.id},null,8,["resourceId"])])])]),_:1})])]),e.vote.type=="party"?(t(),s("div",me,[e.ayes.length>0?(t(),s("h5",ve,"Ayes")):o("",!0),e.ayes.length>0?(t(),s("div",fe,[(t(!0),s(g,null,x(e.ayes,(n,d)=>(t(),s("div",{key:d,class:"col-12 col-md-6 col-lg-4 col-xl-3"},[n.person?(t(),c(f,{key:1,person:n.person},null,8,["person"])):(t(),c(v,{key:0,party:n.party},{default:u(()=>[i(h(n.contribution)+" vote",1),n.contribution!=1?(t(),s("span",ke,"s")):o("",!0)]),_:2},1032,["party"]))]))),128))])):o("",!0),e.noes.length>0?(t(),s("h5",ge,"Noes")):o("",!0),e.noes.length>0?(t(),s("div",xe,[(t(!0),s(g,null,x(e.noes,(n,d)=>(t(),s("div",{key:d,class:"col-12 col-md-6 col-lg-4 col-xl-3"},[n.person?(t(),c(f,{key:1,person:n.person},null,8,["person"])):(t(),c(v,{key:0,party:n.party},{default:u(()=>[i(h(n.contribution)+" vote",1),n.contribution!=1?(t(),s("span",be,"s")):o("",!0)]),_:2},1032,["party"]))]))),128))])):o("",!0),e.abstentions.length>0?(t(),s("h5",we,"Abstentions")):o("",!0),e.abstentions.length>0?(t(),s("div",Te,[(t(!0),s(g,null,x(e.abstentions,(n,d)=>(t(),s("div",{key:d,class:"col-12 col-md-6 col-lg-4 col-xl-3"},[n.person?(t(),c(f,{key:1,person:n.person},null,8,["person"])):(t(),c(v,{key:0,party:n.party},{default:u(()=>[i(h(n.contribution)+" vote",1),n.contribution!=1?(t(),s("span",Le,"s")):o("",!0)]),_:2},1032,["party"]))]))),128))])):o("",!0),e.absences.length>0?(t(),s("h5",Ce,"Absences")):o("",!0),e.absences.length>0?(t(),s("div",Se,[(t(!0),s(g,null,x(e.absences,(n,d)=>(t(),s("div",{key:d,class:"col-12 col-md-6 col-lg-4 col-xl-3"},[n.person?(t(),c(f,{key:1,person:n.person},null,8,["person"])):(t(),c(v,{key:0,party:n.party},{default:u(()=>[i(h(n.contribution)+" vote",1),n.contribution!=1?(t(),s("span",Me,"s")):o("",!0)]),_:2},1032,["party"]))]))),128))])):o("",!0)])):(t(),s("div",De,[T.listMode=="vote"?(t(),s("div",Ie,[e.ayes.length>0?(t(),s("h5",Pe,"Ayes")):o("",!0),a(p,{class:"col-12"},{default:u(()=>[a(k,{positions:e.ayes},null,8,["positions"])]),_:1}),e.noes.length>0?(t(),s("h5",Fe,"Noes")):o("",!0),e.noes.length>0?(t(),c(p,{key:2,class:"col-12"},{default:u(()=>[a(k,{positions:e.noes},null,8,["positions"])]),_:1})):o("",!0),e.abstentions.length>0?(t(),s("h5",He,"Abstentions")):o("",!0),e.abstentions.length>0?(t(),c(p,{key:4,class:"col-12"},{default:u(()=>[a(k,{positions:e.abstentions},null,8,["positions"])]),_:1})):o("",!0),e.absences.length>0?(t(),s("h5",Ve,"Absences")):o("",!0),e.absences.length>0?(t(),c(p,{key:6,class:"col-12"},{default:u(()=>[a(k,{positions:e.absences},null,8,["positions"])]),_:1})):o("",!0)])):o("",!0)])),l("div",qe,[l("p",Ae,[i("Last updated from Hansard "+h(e.relativeDate)+". ",1),e.vote.hansard_status.toLowerCase()=="final"?(t(),s("span",Ne,"The Hansard record that contains this vote is final.")):e.vote.hansard_status.toLowerCase()=="draft"?(t(),s("span",Be,"The Hansard record that contains this vote is in a draft state. Details of the vote are subject to change and the original Hansard will be checked regularly for updates.")):e.vote.hansard_status.toLowerCase()=="corrected"?(t(),s("span",Oe,"The Hansard record that contains this vote is in the 'corrected' stage of publication, but it is not yet final. Minor changes are still possible.")):o("",!0)])])])])):o("",!0)}var Ye=H(z,[["render",je]]);export{Ye as default};
