import{r as I,a as b,m as N,b as D,f as C,p as k}from"./index.145ce648.js";import{a as T,o as h,b as m,e as U,i as d,t as u,v as M,c as O,w as S,f as n,k as y,h as R}from"./entry.cf8c1731.js";function De(t,e){var a;I(1,arguments);var s=b((a=e==null?void 0:e.additionalDigits)!==null&&a!==void 0?a:2);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var r=Z(t),i;if(r.date){var o=B(r.date,s);i=F(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var _=i.getTime(),c=0,f;if(r.time&&(c=W(r.time),isNaN(c)))return new Date(NaN);if(r.timezone){if(f=A(r.timezone),isNaN(f))return new Date(NaN)}else{var l=new Date(_+c),g=new Date(0);return g.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),g.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),g}return new Date(_+c+f)}var p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},j=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,z=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Y=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Z(t){var e={},a=t.split(p.dateTimeDelimiter),s;if(a.length>2)return e;if(/:/.test(a[0])?s=a[0]:(e.date=a[0],s=a[1],p.timeZoneDelimiter.test(e.date)&&(e.date=t.split(p.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){var r=p.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function B(t,e){var a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(a);if(!s)return{year:NaN,restDateString:""};var r=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((s[1]||s[2]).length)}}function F(t,e){if(e===null)return new Date(NaN);var a=t.match(j);if(!a)return new Date(NaN);var s=!!a[4],r=v(a[1]),i=v(a[2])-1,o=v(a[3]),_=v(a[4]),c=v(a[5])-1;if(s)return L(e,_,c)?V(e,_,c):new Date(NaN);var f=new Date(0);return!E(e,i,o)||!H(e,r)?new Date(NaN):(f.setUTCFullYear(e,i,Math.max(r,o)),f)}function v(t){return t?parseInt(t):1}function W(t){var e=t.match(z);if(!e)return NaN;var a=x(e[1]),s=x(e[2]),r=x(e[3]);return q(a,s,r)?a*N+s*D+r*1e3:NaN}function x(t){return t&&parseFloat(t.replace(",","."))||0}function A(t){if(t==="Z")return 0;var e=t.match(Y);if(!e)return 0;var a=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return J(s,r)?a*(s*N+r*D):NaN}function V(t,e,a){var s=new Date(0);s.setUTCFullYear(t,0,4);var r=s.getUTCDay()||7,i=(e-1)*7+a+1-r;return s.setUTCDate(s.getUTCDate()+i),s}var $=[31,null,31,30,31,30,31,31,30,31,30,31];function w(t){return t%400===0||t%4===0&&t%100!==0}function E(t,e,a){return e>=0&&e<=11&&a>=1&&a<=($[e]||(w(t)?29:28))}function H(t,e){return e>=1&&e<=(w(t)?366:365)}function L(t,e,a){return e>=1&&e<=53&&a>=0&&a<=6}function q(t,e,a){return t===24?e===0&&a===0:a>=0&&a<60&&e>=0&&e<60&&t>=0&&t<25}function J(t,e){return e>=0&&e<=59}const P={name:"DownloadLink",data(){return{apiRoot:"https://wheretheystand.nz"}},props:{fileType:{type:String,default:"csv",validator(t){return["csv","json","xlsx"].includes(t)}},resourceType:{type:String,validator(t){return["vote","bill"].includes(t)}},resourceId:{type:String},friendlyName:{default:null}},computed:{fasIconName(){if(this.fileType=="csv")return"file-csv";if(this.fileType=="json")return"file-code";if(this.fileType=="xlsx")return"file-excel"},link(){switch(this.fileType){case"csv":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?df=csv"}case"xlsx":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?df=xlsx"}case"json":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?format=json";case"bill":return this.apiRoot+"/api/bills/"+this.resourceId+"?format=json"}}},saveName(){return this.friendlyName?this.friendlyName+"_"+this.resourceId+"."+this.fileType:this.resourceType+"_"+this.resourceId+"."+this.fileType}}},G=["href","download"];function K(t,e,a,s,r,i){const o=M;return h(),m("a",{href:i.link,class:"me-2",target:"_blank",download:i.saveName},[U(o,{class:"me-1",icon:["fas",i.fasIconName]},null,8,["icon"]),d(u(a.fileType.toUpperCase()),1)],8,G)}const Te=T(P,[["render",K],["__scopeId","data-v-e072208e"]]),Q={props:{vote:{type:Object},countsOnly:{type:Boolean,default:!1}},methods:{formatDate(t){return C(k(t,"yyyy-MM-dd",new Date),"d MMMM yyyy")}},computed:{readingOrdinal(){return this.vote.reading+{1:"st reading",2:"nd reading",3:"rd reading"}[this.vote.reading]}}},X={key:0},ee={class:"text-uppercase"},te={class:"text-uppercase"},ae={key:0},se=n("span",{class:"dot-yes"},null,-1),ne=n("strong",null,"Passed",-1),re={key:1},ie=n("span",{class:"dot-no"},null,-1),oe=n("strong",null,"Defeated",-1),ce={class:"text-muted"},le=n("hr",null,null,-1),ue={class:"row"},de={class:"col-3 text-center"},fe=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-yes"}),d(" Ayes")],-1),_e={class:"col-3 text-center"},ve=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-no"}),d(" Noes")],-1),he={class:"col-3 text-center"},pe=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-abstain"}),d(" Abst.")],-1),me={class:"col-3 text-center"},ge=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-absent"}),d(" Abse.")],-1);function ye(t,e,a,s,r,i){const o=R;return a.vote?(h(),O(o,{key:0},{default:S(()=>[a.countsOnly?y("",!0):(h(),m("div",X,[n("h6",ee,[n("strong",null,u(i.readingOrdinal),1)]),n("h5",te,[a.vote.motion_successful===!0?(h(),m("span",ae,[se,d(),ne])):a.vote.motion_successful===!1?(h(),m("span",re,[ie,d(),oe])):y("",!0)]),n("h6",ce,u(i.formatDate(a.vote.vote_date)),1),le])),n("div",ue,[n("div",de,[n("h3",null,u(a.vote.totals.ayes),1),fe]),n("div",_e,[n("h3",null,u(a.vote.totals.noes),1),ve]),n("div",he,[n("h3",null,u(a.vote.totals.abstentions),1),pe]),n("div",me,[n("h3",null,u(a.vote.totals.absent),1),ge])])]),_:1})):y("",!0)}const we=T(Q,[["render",ye]]);export{Te as _,we as a,De as p};
