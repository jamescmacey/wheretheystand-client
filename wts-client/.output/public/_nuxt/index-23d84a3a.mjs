import{_ as U}from"./PageHeader-3e1d1f75.mjs";import{_ as A}from"./Spinner-e8dc5234.mjs";import{_ as T,B as M,C as R,D as I,E as D,r as w,o as i,c as _,l as f,w as b,h as d,a as m,b as e,G as u,I as J,J as k,K as P,L as j,e as c,t as h,F as H,i as q,M as x,p as S,g as C,m as L,q as N,d as E,j as G}from"./entry-474574c5.mjs";import{f as F}from"./index-f15a075e.mjs";const W={name:"VoteFilter",data(){return{votes:[],count:0,page:1,previous:!1,next:!1,hasLoadedData:!1,isLoading:!1,filterSettings:{titleContains:"",billTypes:{mem:!0,gov:!0,pri:!0,loc:!0},parliamentaryTerm:"",characteristics:{urgencyUsed:!1,extendedSittingsUsed:!1,submissionsOpen:!1,votingMethod:"",type:""},format:{perPage:10,orderBy:"date_desc"}},activeFilter:{titleContains:"",billTypes:{mem:!0,gov:!0,pri:!0,loc:!0},parliamentaryTerm:"",characteristics:{urgencyUsed:!1,extendedSittingsUsed:!1,submissionsOpen:!1,votingMethod:"",type:""},format:{perPage:10,orderBy:"date_desc"}}}},computed:{activeString(){return JSON.stringify(this.activeFilter)},userString(){return JSON.stringify(this.filterSettings)},displayVotes(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.results:this.votes},displayCount(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.count:this.count},displayPage(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.page:this.page},displayNext(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.next:this.next},displayPrevious(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.previous:this.previous}},methods:{async getPage(n){this.isLoading=!0;var s=D+"votes/?",p=await $fetch(s+new URLSearchParams({page:n,per_page:this.activeFilter.format.perPage}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:n,filter:this.activeFilter})});this.isLoading=!1,this.hasLoadedData=!0,this.votes=p.results,this.count=p.count,p.previous?this.previous=!0:this.previous=!1,p.next?this.next=!0:this.next=!1,this.page=n},applyFilter(){this.activeString!=this.userString&&!this.isLoading&&(this.activeFilter=JSON.parse(JSON.stringify(this.filterSettings)),this.getPage(1))},relativeDate(n){return F(S(n,"yyyy-MM-dd",new Date))+" ago"},formattedDate(n){return C(S(n,"yyyy-MM-dd",new Date),"d.M.yyyy")},formattedDateFull(n){return C(S(n,"yyyy-MM-dd",new Date),"d MMMM yyyy")}}},z=Object.assign(W,{async setup(n,{expose:s}){s();let p,r;const o=M().query;var t=1;o.hasOwnProperty("page")&&(t=o.page);const{data:y}=([p,r]=R(()=>I(D+"votes/?page="+t+"&per_page=10")),p=await p,r(),p),v={query:o,initialPage:t,prefetchData:y,API_BASE:D,parse:S,format:C,formatDistanceToNow:F,useRoute:M};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}}),a=n=>(L("data-v-3a8552d7"),n=n(),N(),n),K=a(()=>e("h4",null,"Filter votes",-1)),Q={class:"row mb-2"},X={class:"col-12"},Y=a(()=>e("h5",null,"Refine by bill title",-1)),Z=a(()=>e("label",{for:"text_filter"},"Bill title must contain the following:",-1)),$=a(()=>e("small",{class:"text-muted"},"For less strict textual search, you may wish to use the site-wide search function.",-1)),ee=a(()=>e("hr",null,null,-1)),te={class:"row"},se={class:"col-12 col-xl-3"},ae=a(()=>e("h5",null,"Bill types",-1)),le={class:"form-check"},oe=a(()=>e("label",{class:"form-check-label",for:"check_goverment"}," Government bills ",-1)),ie={class:"form-check"},ne=a(()=>e("label",{class:"form-check-label",for:"check_members"}," Members' bills ",-1)),re={class:"form-check"},ce=a(()=>e("label",{class:"form-check-label",for:"check_local"}," Local bills ",-1)),de={class:"form-check"},_e=a(()=>e("label",{class:"form-check-label",for:"check_private"}," Private bills ",-1)),he=a(()=>e("small",null,[e("strong",null,"OR"),c(": Votes must be for a bill of one of the selected types to be shown.")],-1)),pe={class:"col-12 col-xl-3"},ue=a(()=>e("h5",null,"Vote options",-1)),me=a(()=>e("label",{for:"parliament_select"},"Parliamentary term",-1)),fe=a(()=>e("option",{value:"",selected:""},"Any",-1)),ge=a(()=>e("option",{value:"53"},"53rd Parliament",-1)),ye=a(()=>e("option",{value:"52"},"52nd Parliament",-1)),ve=a(()=>e("option",{value:"51"},"51st Parliament",-1)),be=a(()=>e("option",{value:"50"},"50th Parliament",-1)),ke=[fe,ge,ye,ve,be],Pe=a(()=>e("label",{for:"vote_type_select",class:"mt-2"},"Vote type",-1)),xe=a(()=>e("option",{value:"",selected:""},"Any",-1)),Se=a(()=>e("option",{value:"personal"},"Personal vote",-1)),De=a(()=>e("option",{value:"party"},"Party vote",-1)),we=[xe,Se,De],Ce=a(()=>e("small",null,[e("strong",null,"AND"),c(": Votes must meet both of these criteria to be shown.")],-1)),Ve={class:"col-12 col-xl-3"},Me=a(()=>e("h5",null,"Display options",-1)),Te=a(()=>e("label",{for:"per_page_select"},"Results per page",-1)),Le=a(()=>e("option",{value:"10",selected:""},"10",-1)),Ne=a(()=>e("option",{value:"25"},"25",-1)),Fe=a(()=>e("option",{value:"50"},"50",-1)),Oe=a(()=>e("option",{value:"100"},"100",-1)),Be=[Le,Ne,Fe,Oe],Ue=a(()=>e("label",{for:"order_by_select",class:"mt-2"},"Order by",-1)),Ae=a(()=>e("option",{value:"date_desc",selected:""},"Date (newest first)",-1)),Re=a(()=>e("option",{value:"date_asc"},"Date (oldest first)",-1)),Ie=a(()=>e("option",{value:"reading_desc"},"Reading (latest first)",-1)),Je=a(()=>e("option",{value:"reading_asc"},"Reading (earliest first)",-1)),je=[Ae,Re,Ie,Je],He=a(()=>e("hr",null,null,-1)),qe={class:"row"},Ee={class:"col-12"},Ge={key:1,disabled:"",class:"btn btn-primary",type:"button",id:"button-addon2"},We=a(()=>e("span",{id:"results-marker"},null,-1)),ze={key:1},Ke=a(()=>e("h4",null,"Results",-1)),Qe={key:0},Xe=c(". "),Ye={class:"row"},Ze={class:"col-12 col-xl-5"},$e={class:"mb-0"},et={class:"me-1"},tt={key:0,class:"badge bg-primary text-uppercase"},st={class:"text-muted text-uppercase"},at=a(()=>e("hr",{class:"col-12 d-xl-none mt-2"},null,-1)),lt={class:"col-12 col-xl-7"},ot={class:"row"},it={class:"col-3 text-center"},nt=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-yes"}),c(" Ayes")],-1)),rt={class:"col-3 text-center"},ct=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-no"}),c(" Noes")],-1)),dt={class:"col-3 text-center"},_t=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-abstain"}),c(" Abstentions")],-1)),ht={class:"col-3 text-center"},pt=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-absent"}),c(" Absent")],-1)),ut={key:1,"aria-label":"votes_pagination"},mt={class:"pagination mb-1"},ft={key:0,class:"page-item"},gt={class:"page-item active","aria-current":"page"},yt={key:1,class:"page-item"},vt=a(()=>e("small",null,"Back to start",-1)),bt=[vt],kt={key:2,"aria-label":"votes_pagination"},Pt={class:"pagination mb-1"},xt={key:0,class:"page-item"},St={class:"page-item active","aria-current":"page"},Dt={key:1,class:"page-item"},wt=a(()=>e("small",null,"Back to start",-1)),Ct=[wt];function Vt(n,s,p,r,o,t){const y=w("Link"),v=w("Head"),O=A,V=E,B=G;return i(),_("div",null,[K,r.prefetchData&&r.prefetchData.count&&r.prefetchData.count>0?(i(),f(v,{key:0},{default:b(()=>[r.prefetchData.previous&&r.prefetchData.page==2?(i(),f(y,{key:0,rel:"prev",href:"/votes"})):d("",!0),r.prefetchData.previous&&r.prefetchData.page!=2?(i(),f(y,{key:1,rel:"prev",href:"/votes?page="+(r.prefetchData.page-1)},null,8,["href"])):d("",!0),r.prefetchData.next?(i(),f(y,{key:2,rel:"next",href:"/votes?page="+(r.prefetchData.page+1)},null,8,["href"])):d("",!0)]),_:1})):d("",!0),m(V,null,{default:b(()=>[e("form",{onSubmit:s[10]||(s[10]=j(l=>t.applyFilter(),["prevent"]))},[e("div",Q,[e("div",X,[Y,Z,u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.filterSettings.titleContains=l),class:"form-control",type:"input",id:"text_filter"},null,512),[[J,o.filterSettings.titleContains]]),$])]),ee,e("div",te,[e("div",se,[ae,e("div",le,[u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>o.filterSettings.billTypes.gov=l),class:"form-check-input",type:"checkbox",value:"",id:"check_goverment"},null,512),[[k,o.filterSettings.billTypes.gov]]),oe]),e("div",ie,[u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>o.filterSettings.billTypes.mem=l),class:"form-check-input",type:"checkbox",value:"",id:"check_members"},null,512),[[k,o.filterSettings.billTypes.mem]]),ne]),e("div",re,[u(e("input",{"onUpdate:modelValue":s[3]||(s[3]=l=>o.filterSettings.billTypes.loc=l),class:"form-check-input",type:"checkbox",value:"",id:"check_local"},null,512),[[k,o.filterSettings.billTypes.loc]]),ce]),e("div",de,[u(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>o.filterSettings.billTypes.pri=l),class:"form-check-input",type:"checkbox",value:"",id:"check_private"},null,512),[[k,o.filterSettings.billTypes.pri]]),_e]),he]),e("div",pe,[ue,me,u(e("select",{"onUpdate:modelValue":s[5]||(s[5]=l=>o.filterSettings.parliamentaryTerm=l),class:"form-select",id:"parliament_select","aria-label":"-"},ke,512),[[P,o.filterSettings.parliamentaryTerm]]),Pe,u(e("select",{"onUpdate:modelValue":s[6]||(s[6]=l=>o.filterSettings.characteristics.type=l),class:"form-select",id:"vote_type_select","aria-label":"Vote type"},we,512),[[P,o.filterSettings.characteristics.type]]),Ce]),e("div",Ve,[Me,Te,u(e("select",{"onUpdate:modelValue":s[7]||(s[7]=l=>o.filterSettings.format.perPage=l),class:"form-select",id:"per_page_select","aria-label":"Results per page"},Be,512),[[P,o.filterSettings.format.perPage]]),Ue,u(e("select",{"onUpdate:modelValue":s[8]||(s[8]=l=>o.filterSettings.format.orderBy=l),class:"form-select",id:"order_by_select","aria-label":"Order by"},je,512),[[P,o.filterSettings.format.orderBy]])])]),He,e("div",qe,[e("div",Ee,[t.activeString!=t.userString&&!o.isLoading?(i(),_("button",{key:0,onClick:s[9]||(s[9]=l=>t.applyFilter()),class:"btn btn-primary",type:"button",id:"button-addon2"},"Refine selection")):(i(),_("button",Ge,"Refine selection")),o.isLoading?(i(),f(O,{key:2,class:"ms-2"})):d("",!0)])])],32)]),_:1}),We,o.page?(i(),_("div",ze,[Ke,c(" "+h(t.displayCount)+" result",1),t.displayCount!=1?(i(),_("span",Qe,"s")):d("",!0),Xe,(i(!0),_(H,null,q(t.displayVotes,l=>(i(),f(B,{title:l.name,key:l.id,to:"/votes/"+l.id,class:"vote-link"},{default:b(()=>[m(V,null,{default:b(()=>[e("div",Ye,[e("div",Ze,[e("h6",$e,h(l.name),1),e("small",et,[l.type_desc?(i(),_("span",tt,h(l.type_desc),1)):d("",!0)]),e("small",st,h(t.formattedDateFull(l.date)),1),at]),e("div",lt,[e("div",ot,[e("div",it,[e("h3",null,h(l.ayes),1),nt]),e("div",rt,[e("h3",null,h(l.noes),1),ct]),e("div",dt,[e("h3",null,h(l.abstentions),1),_t]),e("div",ht,[e("h3",null,h(l.absent),1),pt])])])])]),_:2},1024)]),_:2},1032,["title","to"]))),128)),!o.isLoading&&!o.hasLoadedData&&r.prefetchData&&t.displayCount>1?(i(),_("nav",ut,[e("ul",mt,[e("li",{class:x(["page-item",{disabled:!t.displayPrevious}])},[e("a",{class:"page-link",href:"#results-marker",onClick:s[11]||(s[11]=l=>t.getPage(t.displayPage-1))},"Previous")],2),t.displayPrevious?(i(),_("li",ft,[e("a",{class:"page-link",href:"#results-marker",onClick:s[12]||(s[12]=l=>t.getPage(t.displayPage-1))},h(t.displayPage-1),1)])):d("",!0),e("li",gt,[e("a",{class:"page-link",href:"#results-marker",onClick:s[13]||(s[13]=l=>t.getPage(t.displayPage))},h(t.displayPage),1)]),t.displayNext?(i(),_("li",yt,[e("a",{class:"page-link",href:"#results-marker",onClick:s[14]||(s[14]=l=>t.getPage(t.displayPage+1))},h(t.displayPage+1),1)])):d("",!0),e("li",{class:x(["page-item",{disabled:!t.displayNext}])},[e("a",{class:"page-link",href:"#results-marker",onClick:s[15]||(s[15]=l=>t.getPage(t.displayPage+1))},"Next")],2)]),t.displayPage!=1?(i(),_("a",{key:0,onClick:s[16]||(s[16]=l=>t.getPage(1)),id:"back-to-start",href:"#results-marker"},bt)):d("",!0)])):d("",!0),!o.isLoading&&o.hasLoadedData&&t.displayCount>1?(i(),_("nav",kt,[e("ul",Pt,[e("li",{class:x(["page-item",{disabled:!t.displayPrevious}])},[e("a",{class:"page-link",href:"#results-marker",onClick:s[17]||(s[17]=l=>t.getPage(t.displayPage-1))},"Previous")],2),t.displayPrevious?(i(),_("li",xt,[e("a",{class:"page-link",href:"#results-marker",onClick:s[18]||(s[18]=l=>t.getPage(t.displayPage-1))},h(t.displayPage-1),1)])):d("",!0),e("li",St,[e("a",{class:"page-link",href:"#results-marker",onClick:s[19]||(s[19]=l=>t.getPage(t.displayPage))},h(t.displayPage),1)]),t.displayNext?(i(),_("li",Dt,[e("a",{class:"page-link",href:"#results-marker",onClick:s[20]||(s[20]=l=>t.getPage(t.displayPage+1))},h(t.displayPage+1),1)])):d("",!0),e("li",{class:x(["page-item",{disabled:!t.displayNext}])},[e("a",{class:"page-link",href:"#results-marker",onClick:s[21]||(s[21]=l=>t.getPage(t.displayPage+1))},"Next")],2)]),t.displayPage!=1?(i(),_("a",{key:0,onClick:s[22]||(s[22]=l=>t.getPage(1)),id:"back-to-start",href:"#results-marker"},Ct)):d("",!0)])):d("",!0)])):d("",!0)])}var Mt=T(z,[["render",Vt],["__scopeId","data-v-3a8552d7"]]);const Tt={},g=n=>(L("data-v-25b873be"),n=n(),N(),n),Lt={class:"container"},Nt={class:"row mt-3"},Ft={class:"col-12"},Ot=g(()=>e("h4",null,"Parliament votes on bills and amendments many times before they become law.",-1)),Bt=c("There are four types of votes that can happen: "),Ut={id:"vote-types-list"},At=c(),Rt=g(()=>e("strong",null,"Personal votes: ",-1)),It=c(" MPs' votes were cast and recorded individually. "),Jt=c(),jt=g(()=>e("strong",null,"Split-party votes: ",-1)),Ht=c(" Votes which are conducted as a party vote, but one or more parties opts to split their vote across multiple positions. The position of each MP within those parties is recorded individually. "),qt=c(),Et=g(()=>e("strong",null,"Party votes: ",-1)),Gt=c(" Parties cast one vote on behalf of all their MPs. "),Wt=c(),zt=g(()=>e("strong",null,"Voice votes: ",-1)),Kt=c(` MPs shout "aye" or "no", and the Speaker or Chairperson determines the result based on what they hear. The positions of individual MPs or parties aren't recorded. Any MP can ask for a party or personal vote to be conducted after a voice vote. Voice votes aren't shown on WhereTheyStand `),Qt=g(()=>e("p",null,`Currently, WhereTheyStand only contains records of "reading votes" (votes for a bill's first, second or third reading). Over time, this will be expanded to include other votes, like those during the Committee of the whole House stage.`,-1)),Xt={class:"col-12"};function Yt(n,s){const p=U,r=w("FontAwesomeIcon"),o=Mt;return i(),_("div",null,[m(p,{pageTitle:"Votes"}),e("div",Lt,[e("div",Nt,[e("div",Ft,[Ot,e("p",null,[Bt,e("ul",Ut,[e("li",null,[m(r,{icon:["fas","person"]}),At,Rt,It]),e("li",null,[m(r,{icon:["fas","people-group"]}),Jt,jt,Ht]),e("li",null,[m(r,{icon:["fas","people-group"]}),qt,Et,Gt]),e("li",null,[m(r,{icon:["fas","microphone-lines"]}),Wt,zt,Kt])])]),Qt]),e("div",Xt,[m(o)])])])])}var ss=T(Tt,[["render",Yt],["__scopeId","data-v-25b873be"]]);export{ss as default};
