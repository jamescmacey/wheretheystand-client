import{a as g,h as b,o as t,c as p,w as _,e as l,f as o,t as d,b as n,F as w,r as x,l as m,x as B,q as P,s as O,v as F,I as L,X as j,i as h}from"./entry.daa5be84.js";import{_ as A}from"./Spinner.57a59708.js";import{f as V,p as C}from"./index.145ce648.js";import{_ as R}from"./DisplayControlButton.fc6ec320.js";import{f as q}from"./index.dcb4ea67.js";import{u as z}from"./people.578d61e5.js";import"./index.b85c6916.js";const E={name:"PersonPersonalVote",components:{Card:b},props:{record:Object},methods:{dateFormat(i){return V(C(i,"yyyy-MM-dd",new Date),"d.M.yyyy")},readingName(i){return{1:"1st reading",2:"2nd reading",3:"3rd reading"}[i]}}},D=i=>(O("data-v-fe8657e6"),i=i(),F(),i),W={class:"row"},H={key:0},X={class:"vote-info"},Z=D(()=>o("br",null,null,-1)),G=D(()=>o("br",null,null,-1)),J={class:"vote-info text-muted"};function K(i,s,r,k,c,e){const a=B,y=P,f=b;return t(),p(f,null,{default:_(()=>[l(y,{class:"router-link",to:"/bills/"+r.record.bill.id},{default:_(()=>[o("h5",null,d(r.record.bill.name),1),o("div",W,[(t(!0),n(w,null,x(r.record.votes,(u,S)=>(t(),n("div",{class:"col-4 text-center",key:S},[u.position?(t(),n("div",H,[o("span",X,d(e.readingName(S)),1),Z,u.position==="y"?(t(),p(a,{key:0,title:"Supported",class:"position-icon yes",icon:["fas","check"]})):u.position==="n"?(t(),p(a,{key:1,title:"Opposed",class:"position-icon no",icon:["fas","times"]})):u.position==="a"?(t(),p(a,{key:2,title:"Abstained",class:"position-icon abstain",icon:["fas","map-signs"]})):u.position==="x"?(t(),p(a,{key:3,title:"Absent",class:"position-icon absent",icon:["fas","question"]})):m("",!0),G,o("span",J,d(e.dateFormat(u.date)),1)])):m("",!0)]))),128))])]),_:1},8,["to"])]),_:1})}const Q=g(E,[["render",K],["__scopeId","data-v-fe8657e6"]]);const U={name:"InlinePersonText",props:["entity"]},Y={class:"inline-entity"};function $(i,s,r,k,c,e){const a=L("router-link");return t(),p(a,{class:"link",to:"/people/"+r.entity.slug},{default:_(()=>[o("span",Y,[r.entity.colour?(t(),n("span",{key:0,class:"party-dot",style:j({backgroundColor:r.entity.colour})},null,4)):m("",!0),h(" "+d(r.entity.display_name),1)])]),_:1},8,["to"])}const N=g(U,[["render",$],["__scopeId","data-v-a6e173f6"]]),ee={name:"VotingSimilarityDisplay",components:{Card:b,InlinePersonText:N},props:{person:Object,similarityReport:Object}},te=o("p",null,"Voting similarity is based on the proportion of common voting positions in personal reading votes, with a minimum sample size of four votes.",-1);function oe(i,s,r,k,c,e){const a=N,y=b;return t(),p(y,{gradient:!0},{default:_(()=>[o("h5",null,d(r.person.display_name)+" votes most similarly to:",1),(t(!0),n(w,null,x(r.similarityReport.people,f=>(t(),n("span",{key:f.slug},[l(a,{entity:f,class:"mr-2 mb-2"},null,8,["entity"])]))),128)),te]),_:1})}const ne=g(ee,[["render",oe]]);const se={name:"SmallBill",components:{Card:b},props:{bill:Object},computed:{relativeDate(){return q(C(this.bill.date_modified,"yyyy-MM-dd",new Date))+" ago"},formattedDate(){return V(C(this.bill.date_modified,"yyyy-MM-dd",new Date),"d.M.yyyy")}}},ie=["title"];function le(i,s,r,k,c,e){const a=B,y=b,f=P;return t(),p(f,{class:"router-link",to:"/bills/"+r.bill.id},{default:_(()=>[l(y,null,{default:_(()=>[o("h5",null,d(r.bill.name),1),o("p",null,d(r.bill.description),1),r.bill.date_modified?(t(),n("span",{key:0,title:e.formattedDate,class:"text-muted"},[l(a,{icon:["fas","history"]}),h(" Last activity "+d(e.relativeDate),1)],8,ie)):m("",!0)]),_:1})]),_:1},8,["to"])}const re=g(se,[["render",le],["__scopeId","data-v-20770dfa"]]),ae={name:"PersonHome",setup(){return{peopleStore:z()}},data(){return{voteCount:4,billCount:4}},created(){this.peopleStore.fetchVotes(this.$route.params.id),this.peopleStore.fetchBills(this.$route.params.id),this.peopleStore.fetchVotingSimilarity(this.$route.params.id)},computed:{votes(){return this.peopleStore.votesByIdentifier(this.$route.params.id)},bills(){return this.peopleStore.billsByIdentifier(this.$route.params.id)},person(){return this.peopleStore.byIdentifier(this.$route.params.id)},votingSimilarity(){return this.peopleStore.votingSimilarityByIdentifier(this.$route.params.id)},votesByBill(){var i={};return!this.votes||this.votes.length===0?[]:(this.votes.forEach(s=>{s.vote.bill.id in i||(i[s.vote.bill.id]={bill:s.vote.bill,votes:{1:{},2:{},3:{}}}),i[s.vote.bill.id].votes[s.vote.reading]={position:s.position,date:s.date}}),Object.values(i))}}},ce={class:"container"},_e={class:"row mt-3"},de={class:"col-12 col-lg-8"},ue=o("h4",null,"Personal voting history",-1),me={key:0},pe={key:1},he={key:2,class:"row"},ye={key:3},fe={key:4},ve={key:0,class:"col-12 col-lg-4"},be=o("h4",null,"Voting similarity",-1),ge={class:"row"},ke={class:"col-12"},Se=o("p",null,"This feature is coming soon, so please check back at a later date.",-1),we=o("p",null,"In the meantime, click on any voting record to see more information about that bill and its votes.",-1),xe={class:"row"},Ce={class:"col-12"},Be=o("h4",null,"Bills responsible for",-1),Ie={key:0,class:"col-12 col-lg-8"},Pe={key:1},Ve={key:2,class:"row"},De={key:3},Ne={key:4};function Te(i,s,r,k,c,e){const a=B,y=A,f=Q,u=R,S=ne,I=b,T=re;return t(),n("div",ce,[o("div",_e,[o("div",de,[ue,e.votes&&e.votes.length===0?(t(),n("p",me,[l(a,{icon:["fas","info-circle"]}),h(" WhereTheyStand doesn't have any votes to show you.")])):e.votes?m("",!0):(t(),n("p",pe,[l(y),h(" Loading...")])),e.votes?(t(),n("div",he,[(t(!0),n(w,null,x(e.votesByBill.slice(0,c.voteCount),(v,M)=>(t(),n("div",{key:M,class:"col-12 col-lg-6"},[l(f,{record:v},null,8,["record"])]))),128))])):m("",!0),e.votesByBill.length>c.voteCount?(t(),n("div",ye,[l(u,{onClick:s[0]||(s[0]=v=>c.voteCount=e.votesByBill.length)},{default:_(()=>[l(a,{icon:["fas","chevron-down"]}),h(" Show all votes ")]),_:1})])):c.voteCount===e.votesByBill.length&&c.voteCount>4?(t(),n("div",fe,[l(u,{onClick:s[1]||(s[1]=v=>c.voteCount=4)},{default:_(()=>[l(a,{icon:["fas","chevron-up"]}),h(" Show fewer votes ")]),_:1})])):m("",!0)]),e.votingSimilarity&&e.votingSimilarity!={}?(t(),n("div",ve,[be,o("div",ge,[o("div",ke,[e.votingSimilarity.status=="complete"?(t(),p(S,{key:0,person:e.person,similarityReport:e.votingSimilarity},null,8,["person","similarityReport"])):e.votingSimilarity.status=="insufficient"?(t(),p(I,{key:1,gradient:!0},{default:_(()=>[o("p",null,[o("strong",null,"There isn't enough data to show who "+d(e.person.display_name)+" votes similarly to.",1)]),o("p",null,"Once "+d(e.person.display_name)+" has participated in enough personal votes, you will be able to see a list of MPs who tend to vote the same way. Personal votes don't happen often in New Zealand, so it may be some time.",1)]),_:1})):(t(),p(I,{key:2,gradient:!0},{default:_(()=>[o("p",null,[o("strong",null,"WhereTheyStand hasn't checked who "+d(e.person.display_name)+" votes similarly to.",1)]),Se,we]),_:1}))])])])):m("",!0)]),o("div",xe,[o("div",Ce,[Be,e.bills&&e.bills.length===0?(t(),n("p",Ie,[l(a,{icon:["fas","info-circle"]}),h(" "+d(e.person.display_name)+" hasn't sponsored any bills. This doesn't include any member's bills that they might have sitting in the 'biscuit tin' which haven't been drawn yet.",1)])):e.bills?m("",!0):(t(),n("p",Pe,[l(y),h(" Loading...")])),e.bills?(t(),n("div",Ve,[(t(!0),n(w,null,x(e.bills.slice(0,c.billCount),v=>(t(),n("div",{class:"col-12 col-md-6",key:v.id},[l(T,{bill:v},null,8,["bill"])]))),128))])):m("",!0),e.bills&&e.bills.length>c.billCount?(t(),n("div",De,[l(u,{onClick:s[2]||(s[2]=v=>c.billCount=e.bills.length)},{default:_(()=>[l(a,{icon:["fas","chevron-down"]}),h(" Show all bills ")]),_:1})])):e.bills&&c.billCount===e.bills.length&&c.billCount>4?(t(),n("div",Ne,[l(u,{onClick:s[3]||(s[3]=v=>c.billCount=4)},{default:_(()=>[l(a,{icon:["fas","chevron-up"]}),h(" Show fewer bills ")]),_:1})])):m("",!0)])])])}const qe=g(ae,[["render",Te]]);export{qe as default};
