import{s as I,v as C,_ as x,r as b,o as v,c as m,a as U,e as d,t as u,g as k,p as M,l as O,w as S,b as n,h as y,d as R}from"./entry-474574c5.mjs";var D=6e4,T=36e5;function Ie(t,e){I(1,arguments);var s=e||{},a=s.additionalDigits==null?2:C(s.additionalDigits);if(a!==2&&a!==1&&a!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var r=Z(t),i;if(r.date){var o=B(r.date,a);i=F(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var _=i.getTime(),c=0,f;if(r.time&&(c=W(r.time),isNaN(c)))return new Date(NaN);if(r.timezone){if(f=A(r.timezone),isNaN(f))return new Date(NaN)}else{var l=new Date(_+c),g=new Date(0);return g.setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),g.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),g}return new Date(_+c+f)}var p={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},j=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,z=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Y=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Z(t){var e={},s=t.split(p.dateTimeDelimiter),a;if(s.length>2)return e;if(/:/.test(s[0])?a=s[0]:(e.date=s[0],a=s[1],p.timeZoneDelimiter.test(e.date)&&(e.date=t.split(p.timeZoneDelimiter)[0],a=t.substr(e.date.length,t.length))),a){var r=p.timezone.exec(a);r?(e.time=a.replace(r[1],""),e.timezone=r[1]):e.time=a}return e}function B(t,e){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),a=t.match(s);if(!a)return{year:NaN,restDateString:""};var r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?r:i*100,restDateString:t.slice((a[1]||a[2]).length)}}function F(t,e){if(e===null)return new Date(NaN);var s=t.match(j);if(!s)return new Date(NaN);var a=!!s[4],r=h(s[1]),i=h(s[2])-1,o=h(s[3]),_=h(s[4]),c=h(s[5])-1;if(a)return q(e,_,c)?V(e,_,c):new Date(NaN);var f=new Date(0);return!H(e,i,o)||!L(e,r)?new Date(NaN):(f.setUTCFullYear(e,i,Math.max(r,o)),f)}function h(t){return t?parseInt(t):1}function W(t){var e=t.match(z);if(!e)return NaN;var s=N(e[1]),a=N(e[2]),r=N(e[3]);return J(s,a,r)?s*T+a*D+r*1e3:NaN}function N(t){return t&&parseFloat(t.replace(",","."))||0}function A(t){if(t==="Z")return 0;var e=t.match(Y);if(!e)return 0;var s=e[1]==="+"?-1:1,a=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return P(a,r)?s*(a*T+r*D):NaN}function V(t,e,s){var a=new Date(0);a.setUTCFullYear(t,0,4);var r=a.getUTCDay()||7,i=(e-1)*7+s+1-r;return a.setUTCDate(a.getUTCDate()+i),a}var E=[31,null,31,30,31,30,31,31,30,31,30,31];function w(t){return t%400===0||t%4===0&&t%100!==0}function H(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(E[e]||(w(t)?29:28))}function L(t,e){return e>=1&&e<=(w(t)?366:365)}function q(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function J(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function P(t,e){return e>=0&&e<=59}const $={name:"DownloadLink",data(){return{apiRoot:"https://wheretheystand.nz"}},props:{fileType:{type:String,default:"csv",validator(t){return["csv","json","xlsx"].includes(t)}},resourceType:{type:String,validator(t){return["vote","bill"].includes(t)}},resourceId:{type:String},friendlyName:{default:null}},computed:{fasIconName(){if(this.fileType=="csv")return"file-csv";if(this.fileType=="json")return"file-code";if(this.fileType=="xlsx")return"file-excel"},link(){switch(this.fileType){case"csv":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?df=csv"}case"xlsx":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?df=xlsx"}case"json":switch(this.resourceType){case"vote":return this.apiRoot+"/api/votes/"+this.resourceId+"?format=json";case"bill":return this.apiRoot+"/api/bills/"+this.resourceId+"?format=json"}}},saveName(){return this.friendlyName?this.friendlyName+"_"+this.resourceId+"."+this.fileType:this.resourceType+"_"+this.resourceId+"."+this.fileType}}},G=["href","download"];function K(t,e,s,a,r,i){const o=b("font-awesome-icon");return v(),m("a",{href:i.link,class:"me-2",target:"_blank",download:i.saveName},[U(o,{class:"me-1",icon:["fas",i.fasIconName]},null,8,["icon"]),d(u(s.fileType.toUpperCase()),1)],8,G)}var Ce=x($,[["render",K],["__scopeId","data-v-513dc3c1"]]);const Q={props:{vote:{type:Object},countsOnly:{type:Boolean,default:!1}},methods:{formatDate(t){return k(M(t,"yyyy-MM-dd",new Date),"d MMMM yyyy")}},computed:{readingOrdinal(){return this.vote.reading+{1:"st reading",2:"nd reading",3:"rd reading"}[this.vote.reading]}}},X={key:0},ee={class:"text-uppercase"},te={class:"text-uppercase"},se={key:0},ae=n("span",{class:"dot-yes"},null,-1),ne=d(),re=n("strong",null,"Passed",-1),ie=[ae,ne,re],oe={key:1},ce=n("span",{class:"dot-no"},null,-1),le=d(),ue=n("strong",null,"Defeated",-1),de=[ce,le,ue],fe={class:"text-muted"},_e=n("hr",null,null,-1),he={class:"row"},ve={class:"col-3 text-center"},pe=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-yes"}),d(" Ayes")],-1),me={class:"col-3 text-center"},ge=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-no"}),d(" Noes")],-1),ye={class:"col-3 text-center"},Ne=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-abstain"}),d(" Abst.")],-1),xe={class:"col-3 text-center"},De=n("h6",{class:"text-muted text-uppercase"},[n("span",{class:"dot-absent"}),d(" Abse.")],-1);function Te(t,e,s,a,r,i){const o=R;return s.vote?(v(),O(o,{key:0},{default:S(()=>[s.countsOnly?y("",!0):(v(),m("div",X,[n("h6",ee,[n("strong",null,u(i.readingOrdinal),1)]),n("h5",te,[s.vote.motion_successful===!0?(v(),m("span",se,ie)):s.vote.motion_successful===!1?(v(),m("span",oe,de)):y("",!0)]),n("h6",fe,u(i.formatDate(s.vote.vote_date)),1),_e])),n("div",he,[n("div",ve,[n("h3",null,u(s.vote.totals.ayes),1),pe]),n("div",me,[n("h3",null,u(s.vote.totals.noes),1),ge]),n("div",ye,[n("h3",null,u(s.vote.totals.abstentions),1),Ne]),n("div",xe,[n("h3",null,u(s.vote.totals.absent),1),De])])]),_:1})):y("",!0)}var be=x(Q,[["render",Te]]);export{Ce as _,be as a,Ie as p};
