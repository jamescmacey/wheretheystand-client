import{_ as F}from"./PageHeader.935cdc4f.js";import{a as C,x as B,m as U,A as D,o as r,b as _,c as m,w as y,k as d,e as f,f as e,y as O,z as u,B as A,C as v,D as b,i as n,t as p,F as R,r as I,E as k,L as H,H as J,h as q,p as E,q as V,s as M,v as z}from"./entry.cf8c1731.js";import{_ as W}from"./Spinner.62ccbd15.js";import{f as j}from"./index.dcb4ea67.js";import{p as x,f as w}from"./index.145ce648.js";import"./index.b85c6916.js";const G={async setup(){const o=B().query;var t=1;o.hasOwnProperty("page")&&(t=o.page);const{data:h}=await U(D+"votes/?page="+t+"&per_page=10","$ato1r1QKMH");return{prefetchData:h}},name:"VoteFilter",data(){return{votes:[],count:0,page:1,previous:!1,next:!1,hasLoadedData:!1,isLoading:!1,filterSettings:{titleContains:"",billTypes:{mem:!0,gov:!0,pri:!0,loc:!0},parliamentaryTerm:"",characteristics:{urgencyUsed:!1,extendedSittingsUsed:!1,submissionsOpen:!1,votingMethod:"",type:""},format:{perPage:10,orderBy:"date_desc"}},activeFilter:{titleContains:"",billTypes:{mem:!0,gov:!0,pri:!0,loc:!0},parliamentaryTerm:"",characteristics:{urgencyUsed:!1,extendedSittingsUsed:!1,submissionsOpen:!1,votingMethod:"",type:""},format:{perPage:10,orderBy:"date_desc"}}}},computed:{activeString(){return JSON.stringify(this.activeFilter)},userString(){return JSON.stringify(this.filterSettings)},displayVotes(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.results:this.votes},displayCount(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.count:this.count},displayPage(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.page:this.page},displayNext(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.next:this.next},displayPrevious(){return!this.hasLoadedData&&this.prefetchData?this.prefetchData.previous:this.previous}},methods:{async getPage(o){this.isLoading=!0;var t=D+"votes/?",h=await $fetch(t+new URLSearchParams({page:o,per_page:this.activeFilter.format.perPage}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page:o,filter:this.activeFilter})});this.isLoading=!1,this.hasLoadedData=!0,this.votes=h.results,this.count=h.count,h.previous?this.previous=!0:this.previous=!1,h.next?this.next=!0:this.next=!1,this.page=o},applyFilter(){this.activeString!=this.userString&&!this.isLoading&&(this.activeFilter=JSON.parse(JSON.stringify(this.filterSettings)),this.getPage(1))},relativeDate(o){return j(x(o,"yyyy-MM-dd",new Date))+" ago"},formattedDate(o){return w(x(o,"yyyy-MM-dd",new Date),"d.M.yyyy")},formattedDateFull(o){return w(x(o,"yyyy-MM-dd",new Date),"d MMMM yyyy")}}},a=o=>(V("data-v-cd5cd4c4"),o=o(),M(),o),K=a(()=>e("h4",null,"Filter votes",-1)),Q={class:"row mb-2"},X={class:"col-12"},Y=a(()=>e("h5",null,"Refine by bill title",-1)),Z=a(()=>e("label",{for:"text_filter"},"Bill title must contain the following:",-1)),$=a(()=>e("small",{class:"text-muted"},"For less strict textual search, you may wish to use the site-wide search function.",-1)),ee=a(()=>e("hr",null,null,-1)),te={class:"row"},se={class:"col-12 col-xl-3"},ae=a(()=>e("h5",null,"Bill types",-1)),le={class:"form-check"},ie=a(()=>e("label",{class:"form-check-label",for:"check_goverment"}," Government bills ",-1)),oe={class:"form-check"},re=a(()=>e("label",{class:"form-check-label",for:"check_members"}," Members' bills ",-1)),ne={class:"form-check"},ce=a(()=>e("label",{class:"form-check-label",for:"check_local"}," Local bills ",-1)),de={class:"form-check"},_e=a(()=>e("label",{class:"form-check-label",for:"check_private"}," Private bills ",-1)),pe=a(()=>e("small",null,[e("strong",null,"OR"),n(": Votes must be for a bill of one of the selected types to be shown.")],-1)),he={class:"col-12 col-xl-3"},ue=a(()=>e("h5",null,"Vote options",-1)),fe=a(()=>e("label",{for:"parliament_select"},"Parliamentary term",-1)),me=a(()=>e("option",{value:"",selected:""},"Any",-1)),ge=a(()=>e("option",{value:"53"},"53rd Parliament",-1)),ye=a(()=>e("option",{value:"52"},"52nd Parliament",-1)),ve=a(()=>e("option",{value:"51"},"51st Parliament",-1)),be=a(()=>e("option",{value:"50"},"50th Parliament",-1)),ke=[me,ge,ye,ve,be],Pe=a(()=>e("label",{for:"vote_type_select",class:"mt-2"},"Vote type",-1)),xe=a(()=>e("option",{value:"",selected:""},"Any",-1)),Se=a(()=>e("option",{value:"personal"},"Personal vote",-1)),De=a(()=>e("option",{value:"party"},"Party vote",-1)),we=[xe,Se,De],Ce=a(()=>e("small",null,[e("strong",null,"AND"),n(": Votes must meet both of these criteria to be shown.")],-1)),Ve={class:"col-12 col-xl-3"},Me=a(()=>e("h5",null,"Display options",-1)),Te=a(()=>e("label",{for:"per_page_select"},"Results per page",-1)),Le=a(()=>e("option",{value:"10",selected:""},"10",-1)),Ne=a(()=>e("option",{value:"25"},"25",-1)),Fe=a(()=>e("option",{value:"50"},"50",-1)),Be=a(()=>e("option",{value:"100"},"100",-1)),Ue=[Le,Ne,Fe,Be],Oe=a(()=>e("label",{for:"order_by_select",class:"mt-2"},"Order by",-1)),Ae=a(()=>e("option",{value:"date_desc",selected:""},"Date (newest first)",-1)),Re=a(()=>e("option",{value:"date_asc"},"Date (oldest first)",-1)),Ie=a(()=>e("option",{value:"reading_desc"},"Reading (latest first)",-1)),He=a(()=>e("option",{value:"reading_asc"},"Reading (earliest first)",-1)),Je=[Ae,Re,Ie,He],qe=a(()=>e("hr",null,null,-1)),Ee={class:"row"},ze={class:"col-12"},We={key:1,disabled:"",class:"btn btn-primary",type:"button",id:"button-addon2"},je=a(()=>e("span",{id:"results-marker"},null,-1)),Ge={key:1},Ke=a(()=>e("h4",null,"Results",-1)),Qe={key:0},Xe={class:"row"},Ye={class:"col-12 col-xl-5"},Ze={class:"mb-0"},$e={class:"me-1"},et={key:0,class:"badge bg-primary text-uppercase"},tt={class:"text-muted text-uppercase"},st=a(()=>e("hr",{class:"col-12 d-xl-none mt-2"},null,-1)),at={class:"col-12 col-xl-7"},lt={class:"row"},it={class:"col-3 text-center"},ot=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-yes"}),n(" Ayes")],-1)),rt={class:"col-3 text-center"},nt=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-no"}),n(" Noes")],-1)),ct={class:"col-3 text-center"},dt=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-abstain"}),n(" Abstentions")],-1)),_t={class:"col-3 text-center"},pt=a(()=>e("h6",{class:"text-muted text-uppercase"},[e("span",{class:"dot-absent"}),n(" Absent")],-1)),ht={key:1,"aria-label":"votes_pagination"},ut={class:"pagination mb-1"},ft={key:0,class:"page-item"},mt={class:"page-item active","aria-current":"page"},gt={key:1,class:"page-item"},yt=a(()=>e("small",null,"Back to start",-1)),vt=[yt],bt={key:2,"aria-label":"votes_pagination"},kt={class:"pagination mb-1"},Pt={key:0,class:"page-item"},xt={class:"page-item active","aria-current":"page"},St={key:1,class:"page-item"},Dt=a(()=>e("small",null,"Back to start",-1)),wt=[Dt];function Ct(o,t,h,c,i,s){const P=H,T=J,L=W,S=q,N=E;return r(),_("div",null,[K,c.prefetchData&&c.prefetchData.count&&c.prefetchData.count>0?(r(),m(T,{key:0},{default:y(()=>[c.prefetchData.previous&&c.prefetchData.page==2?(r(),m(P,{key:0,rel:"prev",href:"/votes"})):d("",!0),c.prefetchData.previous&&c.prefetchData.page!=2?(r(),m(P,{key:1,rel:"prev",href:"/votes?page="+(c.prefetchData.page-1)},null,8,["href"])):d("",!0),c.prefetchData.next?(r(),m(P,{key:2,rel:"next",href:"/votes?page="+(c.prefetchData.page+1)},null,8,["href"])):d("",!0)]),_:1})):d("",!0),f(S,null,{default:y(()=>[e("form",{onSubmit:t[10]||(t[10]=O(l=>s.applyFilter(),["prevent"]))},[e("div",Q,[e("div",X,[Y,Z,u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>i.filterSettings.titleContains=l),class:"form-control",type:"input",id:"text_filter"},null,512),[[A,i.filterSettings.titleContains]]),$])]),ee,e("div",te,[e("div",se,[ae,e("div",le,[u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>i.filterSettings.billTypes.gov=l),class:"form-check-input",type:"checkbox",value:"",id:"check_goverment"},null,512),[[v,i.filterSettings.billTypes.gov]]),ie]),e("div",oe,[u(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.filterSettings.billTypes.mem=l),class:"form-check-input",type:"checkbox",value:"",id:"check_members"},null,512),[[v,i.filterSettings.billTypes.mem]]),re]),e("div",ne,[u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>i.filterSettings.billTypes.loc=l),class:"form-check-input",type:"checkbox",value:"",id:"check_local"},null,512),[[v,i.filterSettings.billTypes.loc]]),ce]),e("div",de,[u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>i.filterSettings.billTypes.pri=l),class:"form-check-input",type:"checkbox",value:"",id:"check_private"},null,512),[[v,i.filterSettings.billTypes.pri]]),_e]),pe]),e("div",he,[ue,fe,u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=l=>i.filterSettings.parliamentaryTerm=l),class:"form-select",id:"parliament_select","aria-label":"-"},ke,512),[[b,i.filterSettings.parliamentaryTerm]]),Pe,u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=l=>i.filterSettings.characteristics.type=l),class:"form-select",id:"vote_type_select","aria-label":"Vote type"},we,512),[[b,i.filterSettings.characteristics.type]]),Ce]),e("div",Ve,[Me,Te,u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>i.filterSettings.format.perPage=l),class:"form-select",id:"per_page_select","aria-label":"Results per page"},Ue,512),[[b,i.filterSettings.format.perPage]]),Oe,u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>i.filterSettings.format.orderBy=l),class:"form-select",id:"order_by_select","aria-label":"Order by"},Je,512),[[b,i.filterSettings.format.orderBy]])])]),qe,e("div",Ee,[e("div",ze,[s.activeString!=s.userString&&!i.isLoading?(r(),_("button",{key:0,onClick:t[9]||(t[9]=l=>s.applyFilter()),class:"btn btn-primary",type:"button",id:"button-addon2"},"Refine selection")):(r(),_("button",We,"Refine selection")),i.isLoading?(r(),m(L,{key:2,class:"ms-2"})):d("",!0)])])],32)]),_:1}),je,i.page?(r(),_("div",Ge,[Ke,n(" "+p(s.displayCount)+" result",1),s.displayCount!=1?(r(),_("span",Qe,"s")):d("",!0),n(". "),(r(!0),_(R,null,I(s.displayVotes,l=>(r(),m(N,{title:l.name,key:l.id,to:"/votes/"+l.id,class:"vote-link"},{default:y(()=>[f(S,null,{default:y(()=>[e("div",Xe,[e("div",Ye,[e("h6",Ze,p(l.name),1),e("small",$e,[l.type_desc?(r(),_("span",et,p(l.type_desc),1)):d("",!0)]),e("small",tt,p(s.formattedDateFull(l.date)),1),st]),e("div",at,[e("div",lt,[e("div",it,[e("h3",null,p(l.ayes),1),ot]),e("div",rt,[e("h3",null,p(l.noes),1),nt]),e("div",ct,[e("h3",null,p(l.abstentions),1),dt]),e("div",_t,[e("h3",null,p(l.absent),1),pt])])])])]),_:2},1024)]),_:2},1032,["title","to"]))),128)),!i.isLoading&&!i.hasLoadedData&&c.prefetchData&&s.displayCount>1?(r(),_("nav",ht,[e("ul",ut,[e("li",{class:k(["page-item",{disabled:!s.displayPrevious}])},[e("a",{class:"page-link",href:"#results-marker",onClick:t[11]||(t[11]=l=>s.getPage(s.displayPage-1))},"Previous")],2),s.displayPrevious?(r(),_("li",ft,[e("a",{class:"page-link",href:"#results-marker",onClick:t[12]||(t[12]=l=>s.getPage(s.displayPage-1))},p(s.displayPage-1),1)])):d("",!0),e("li",mt,[e("a",{class:"page-link",href:"#results-marker",onClick:t[13]||(t[13]=l=>s.getPage(s.displayPage))},p(s.displayPage),1)]),s.displayNext?(r(),_("li",gt,[e("a",{class:"page-link",href:"#results-marker",onClick:t[14]||(t[14]=l=>s.getPage(s.displayPage+1))},p(s.displayPage+1),1)])):d("",!0),e("li",{class:k(["page-item",{disabled:!s.displayNext}])},[e("a",{class:"page-link",href:"#results-marker",onClick:t[15]||(t[15]=l=>s.getPage(s.displayPage+1))},"Next")],2)]),s.displayPage!=1?(r(),_("a",{key:0,onClick:t[16]||(t[16]=l=>s.getPage(1)),id:"back-to-start",href:"#results-marker"},vt)):d("",!0)])):d("",!0),!i.isLoading&&i.hasLoadedData&&s.displayCount>1?(r(),_("nav",bt,[e("ul",kt,[e("li",{class:k(["page-item",{disabled:!s.displayPrevious}])},[e("a",{class:"page-link",href:"#results-marker",onClick:t[17]||(t[17]=l=>s.getPage(s.displayPage-1))},"Previous")],2),s.displayPrevious?(r(),_("li",Pt,[e("a",{class:"page-link",href:"#results-marker",onClick:t[18]||(t[18]=l=>s.getPage(s.displayPage-1))},p(s.displayPage-1),1)])):d("",!0),e("li",xt,[e("a",{class:"page-link",href:"#results-marker",onClick:t[19]||(t[19]=l=>s.getPage(s.displayPage))},p(s.displayPage),1)]),s.displayNext?(r(),_("li",St,[e("a",{class:"page-link",href:"#results-marker",onClick:t[20]||(t[20]=l=>s.getPage(s.displayPage+1))},p(s.displayPage+1),1)])):d("",!0),e("li",{class:k(["page-item",{disabled:!s.displayNext}])},[e("a",{class:"page-link",href:"#results-marker",onClick:t[21]||(t[21]=l=>s.getPage(s.displayPage+1))},"Next")],2)]),s.displayPage!=1?(r(),_("a",{key:0,onClick:t[22]||(t[22]=l=>s.getPage(1)),id:"back-to-start",href:"#results-marker"},wt)):d("",!0)])):d("",!0)])):d("",!0)])}const Vt=C(G,[["render",Ct],["__scopeId","data-v-cd5cd4c4"]]);const Mt={},g=o=>(V("data-v-835e00a6"),o=o(),M(),o),Tt={class:"container"},Lt={class:"row mt-3"},Nt={class:"col-12"},Ft=g(()=>e("h4",null,"Parliament votes on bills and amendments many times before they become law.",-1)),Bt={id:"vote-types-list"},Ut=g(()=>e("strong",null,"Personal votes: ",-1)),Ot=g(()=>e("strong",null,"Split-party votes: ",-1)),At=g(()=>e("strong",null,"Party votes: ",-1)),Rt=g(()=>e("strong",null,"Voice votes: ",-1)),It=g(()=>e("p",null,`Currently, WhereTheyStand only contains records of "reading votes" (votes for a bill's first, second or third reading). Over time, this will be expanded to include other votes, like those during the Committee of the whole House stage.`,-1)),Ht={class:"col-12"};function Jt(o,t){const h=F,c=z,i=Vt;return r(),_("div",null,[f(h,{pageTitle:"Votes"}),e("div",Tt,[e("div",Lt,[e("div",Nt,[Ft,e("p",null,[n("There are four types of votes that can happen: "),e("ul",Bt,[e("li",null,[f(c,{icon:["fas","person"]}),n(),Ut,n(" MPs' votes were cast and recorded individually. ")]),e("li",null,[f(c,{icon:["fas","people-group"]}),n(),Ot,n(" Votes which are conducted as a party vote, but one or more parties opts to split their vote across multiple positions. The position of each MP within those parties is recorded individually. ")]),e("li",null,[f(c,{icon:["fas","people-group"]}),n(),At,n(" Parties cast one vote on behalf of all their MPs. ")]),e("li",null,[f(c,{icon:["fas","microphone-lines"]}),n(),Rt,n(` MPs shout "aye" or "no", and the Speaker or Chairperson determines the result based on what they hear. The positions of individual MPs or parties aren't recorded. Any MP can ask for a party or personal vote to be conducted after a voice vote. Voice votes aren't shown on WhereTheyStand `)])])]),It]),e("div",Ht,[f(i)])])])])}const Kt=C(Mt,[["render",Jt],["__scopeId","data-v-835e00a6"]]);export{Kt as default};
