import{_ as A}from"./PageHeader.99192d26.js";import{a as p,N as x,O as D,J as b,o as _,b as i,f as e,e as t,i as d,l as y,x as $,t as h,w as a,F as I,r as L,c as B,k as w,h as C,q as N,s as T,v as P}from"./entry.7914bd7a.js";import{f as z}from"./index.dcb4ea67.js";import{p as Y}from"./index.58aab3e7.js";import{_ as F}from"./Spinner.d0585b76.js";import"./index.145ce648.js";import"./index.b85c6916.js";const M={name:"SignOutButton",setup(){const{isLoading:n,isAuthorized:c,username:o}=x();return{isLoading:n,isAuthorized:c,username:o}},methods:{async signOut(){await new D().signOut()&&b("/")}}},V={key:0,class:"container-fluid",style:{"background-color":"rgb(52, 148, 148)"}},W={class:"container py-2"};function j(n,c,o,s,u,r){const v=$;return s.isAuthorized?(_(),i("div",V,[e("div",W,[e("a",{class:"back-link",href:"#",onClick:c[0]||(c[0]=f=>r.signOut())},[t(v,{icon:["fas","arrow-left"]}),d(" Sign out ")])])])):y("",!0)}const E=p(M,[["render",j],["__scopeId","data-v-47a41a2e"]]),q={name:"WebauthnDevice",props:["device"],methods:{relativeDate(n){return z(Y(n))+" ago"}}},H={class:"row"},J={class:"col-12 col-md-6"},U=e("strong",null,"Created:",-1),G={class:"col-12 col-md-6"},K=e("strong",null,"Last used:",-1),Q={class:"col-12 col-md-6"},R=e("strong",null,"Used: ",-1),X={key:0},Z=e("hr",null,null,-1);function ee(n,c,o,s,u,r){return _(),i("div",null,[e("h6",null,h(o.device.friendly_name),1),e("div",H,[e("div",J,[U,d(" "+h(r.relativeDate(o.device.created_at)),1)]),e("div",G,[K,d(" "+h(r.relativeDate(o.device.last_login_at)),1)]),e("div",Q,[R,d(h(o.device.usage_count)+" time",1),o.device.usage_count!=1?(_(),i("span",X,"s")):y("",!0),d(". ")])]),Z])}const te=p(q,[["render",ee]]);const ne={name:"MePage",setup(){const{isLoading:n,isAuthorized:c,username:o,webauthnDevices:s}=x();return{isLoading:n,isAuthorized:c,username:o,webauthnDevices:s}}},l=n=>(T("data-v-0131673e"),n=n(),P(),n),oe={key:0,class:"row mt-3"},se={class:"col-xl-6 col-lg-6 col-12"},ce=l(()=>e("h4",null,"Authentication",-1)),_e=l(()=>e("span",null,"You don't have a password; you log in using a passkey or a one-time code.",-1)),ae=l(()=>e("h5",null,"Your details",-1)),ie=l(()=>e("strong",null,"Email address: ",-1)),le=l(()=>e("h5",null,"Passkeys",-1)),de={class:"col-xl-6 col-lg-6 col-12"},re=l(()=>e("h4",null,"Authorisations",-1)),ue=l(()=>e("span",null,"These roles and permissions keep track of what you're allowed to do on WhereTheyStand.",-1)),he={key:1,class:"row mt-3"},me={class:"d-flex justify-content-center"},pe={class:"col-xl-4 col-lg-5 col-12"},ve=l(()=>e("h4",null,"You need to sign in.",-1)),fe={key:2,class:"row mt-3"},ge={class:"d-flex justify-content-center"},xe={class:"col-xl-4 col-lg-5 col-12"},ye=l(()=>e("h4",null,"Loading...",-1));function $e(n,c,o,s,u,r){const v=te,f=w,m=C,k=$,S=N,O=F;return _(),i("div",null,[s.isAuthorized?(_(),i("div",oe,[e("div",se,[ce,_e,t(m,null,{default:a(()=>[t(f,null,{default:a(()=>[ae,ie,d(" "+h(s.username)+" ",1),le,(_(!0),i(I,null,L(s.webauthnDevices,g=>(_(),B(v,{key:g.id,device:g},null,8,["device"]))),128))]),_:1})]),_:1})]),e("div",de,[re,ue,t(m,null,{default:a(()=>[t(f,null,{default:a(()=>[d(" You have no authorisations. ")]),_:1})]),_:1})])])):!s.isLoading&&!s.isAuthorized?(_(),i("div",he,[e("div",me,[e("div",pe,[ve,t(m,{class:"text-center"},{default:a(()=>[t(S,{to:"/auth"},{default:a(()=>[d("Sign in "),t(k,{icon:["fas","arrow-right"]})]),_:1})]),_:1})])])])):(_(),i("div",fe,[e("div",ge,[e("div",xe,[ye,t(m,{class:"text-center"},{default:a(()=>[t(O)]),_:1})])])]))])}const we=p(ne,[["render",$e],["__scopeId","data-v-0131673e"]]),ke={},Se={class:"container"};function Oe(n,c){const o=A,s=E,u=w,r=we;return _(),i("div",null,[t(o,{pageTitle:"Your WhereTheyStand account"}),t(u,null,{default:a(()=>[t(s)]),_:1}),e("div",Se,[t(u,{placeholder:"Loading profile view."},{default:a(()=>[t(r)]),_:1})])])}const Ne=p(ke,[["render",Oe]]);export{Ne as default};
