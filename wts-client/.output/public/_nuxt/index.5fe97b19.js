import{l as M,m as S,A as b,a as T,b as c,e as u,w as m,f as s,k as l,c as k,z as P,C as N,H as B,h as D,o as a,i as d,t as h,F as H,r as C,q as V,s as F,M as W,p as A}from"./entry.cf8c1731.js";import{_ as L}from"./PageHeader.935cdc4f.js";import{_ as z}from"./PersonCard.54698fd8.js";import{_ as x}from"./ColourDot.718b357d.js";import{f as U,p as X}from"./index.145ce648.js";const j=M("electorates",{state(){return{items:[],data:{histories:{},shapes:{}}}},getters:{byIdentifier:t=>o=>t.items.find(n=>n.slug===o)?t.items.find(n=>n.slug===o):t.items.find(n=>n.id===o),historyByIdentifier:t=>o=>t.data.histories[o],shapeByIdentifier:t=>o=>t.data.shapes[o]},actions:{async fetch(t){if(!this.byIdentifier(t)){var o=this;await S(b+"electorates/"+t+"/",{onResponse({request:n,response:_,options:i}){o.items.push(_._data)},onResponseError({request:n,response:_,options:i}){useNotificationsStore().postResponseError(_)},onRequestError({request:n,options:_,error:i}){useNotificationsStore().addToast("Error fetching resource (request)",i)}},"$uURIksy8X5")}},async fetchHistory(t){if(!this.historyByIdentifier(t)){var o=this;await S(b+"electorates/"+t+"/history/",{onResponse({request:n,response:_,options:i}){o.data.histories[t]=_._data},onResponseError({request:n,response:_,options:i}){useNotificationsStore().postResponseError(_)},onRequestError({request:n,options:_,error:i}){useNotificationsStore().addToast("Error fetching resource (request)",i)}},"$Hh9FkjXIxP")}},async fetchShape(t){if(!this.shapeByIdentifier(t)){var o=this;await S(b+"electorates/"+t+"/shape/",{onResponse({request:n,response:_,options:i}){o.data.shapes[t]=_._data},onResponseError({request:n,response:_,options:i}){useNotificationsStore().postResponseError(_)},onRequestError({request:n,options:_,error:i}){useNotificationsStore().addToast("Error fetching resource (request)",i)}},"$wzooPl4C85")}}}});const G={name:"Electorate",setup(){return{electoratesStore:j()}},data(){return{showReasons:!1}},created(){this.electoratesStore.fetch(this.$route.params.id),this.electoratesStore.fetchHistory(this.$route.params.id),this.electoratesStore.fetchShape(this.$route.params.id)},computed:{electorate(){return this.electoratesStore.byIdentifier(this.$route.params.id)},affiliations(){return this.electoratesStore.historyByIdentifier(this.$route.params.id)},shape(){return null},paths(){if(!this.shape||this.shape["wts-comment"]=="noshape")return[];var t=this.shape.features[0];if(t.geometry.type=="Polygon")return this.shape.features[0].geometry.coordinates;if(t.geometry.type=="MultiPolygon"){var o=[];return this.shape.features[0].geometry.coordinates.forEach(n=>{o.push(n[0])}),o}},limits(){if(!(!this.shape||this.shape["wts-comment"]=="noshape")){var t=-180,o=0,n=0,_=360;return this.paths.forEach(i=>{i.forEach(e=>{var p=e[0],v=e[1];p<0&&(p=p+360),p>n&&(n=p),p<_&&(_=p),v>t&&(t=v),v<o&&(o=v)})}),n>180&&(n=n-360),{north:t,south:o,east:n,west:_}}},center(){if(this.limits){var t=this.limits.east;t<0&&(t=t+360);var o=(t+this.limits.west)/2;return o>180&&(o=o-360),[o,(this.limits.north+this.limits.south)/2]}else return[0,0]},centerGoogle(){return{lat:this.center[0],lng:this.center[1]}}},methods:{formatDate(t){return U(X(t,"yyyy-MM-dd",new Date),"d MMMM yyyy")}},watch:{$route(t,o){t.fullPath.startsWith("/electorates/")&&(this.electoratesStore.fetch(t.params.id),this.electoratesStore.fetchHistory(t.params.id),this.electoratesStore.fetchShape(t.params.id))}},mounted(){}},f=t=>(V("data-v-d4b8fde5"),t=t(),F(),t),J={key:0,id:"electorate-view"},K=f(()=>s("div",{class:"container-fluid hero pt-0"},null,-1)),O={class:"mt-3 container"},Q={key:0},Y={class:"row"},Z={class:"col-12 col-xl-4"},$=f(()=>s("h4",null,"Incumbent Member of Parliament",-1)),ee={key:1},te={class:"row"},se={class:"col-12"},oe={key:0},re={key:0},ae={key:0},ne={key:0},ce={class:"row"},le={class:"col-12"},ie=f(()=>s("h4",null,"Previous MPs",-1)),de={class:"form-check"},_e=f(()=>s("label",{class:"form-check-label",for:"showReasons"}," Show reasons for commencement and conclusion of terms ",-1)),he={class:"col-12"},ue={key:0},pe={key:0,class:"d-flex align-items-center"},me={class:"flex-shrink-0"},fe=["src","alt"],ye={class:"flex-grow-1 ms-3"},ve={class:"text-muted"},ge={key:1},we={class:"text-muted person-description"},ke={class:"row"},Se=f(()=>s("div",{class:"col-1"},null,-1)),be={class:"col-11"},xe={class:"row"},Re={class:"col-12 col-md-6"},Ee=f(()=>s("h6",{class:"affiliation-date-heading"},"Started:",-1)),qe={key:0,class:"affiliation-date-heading"},Ie={key:1},Me={key:0,class:"col-12 col-md-6"},Te=f(()=>s("h6",{class:"affiliation-date-heading"},"Ended:",-1)),Pe={key:0,class:"affiliation-date-heading"},Ne={key:1},Be={key:0},De={key:1},He=f(()=>s("hr",null,null,-1)),Ce=f(()=>s("p",{class:"text-muted"},"These dates correspond to when an MP was eligible to sit and vote in the House of Representatives, not when they were declared elected. This list only includes MPs with profiles on WhereTheyStand, so it may contain some gaps.",-1)),Ve={key:2},Fe={class:"row"},We={class:"col-12"},Ae=f(()=>s("h4",null,"History",-1));function Le(t,o,n,_,i,e){const p=W,v=B,R=L,E=z,g=A,w=D,q=x,I=x;return e.electorate?(a(),c("div",J,[u(v,null,{default:m(()=>[u(p,{name:"twitter:title",content:e.electorate.name+" - WhereTheyStand"},null,8,["content"]),u(p,{name:"twitter:description",content:e.electorate.description},null,8,["content"]),u(p,{name:"description",content:e.electorate.description},null,8,["content"]),u(p,{property:"og:title",content:e.electorate.name+" - WhereTheyStand"},null,8,["content"]),u(p,{property:"og:description",content:e.electorate.description},null,8,["content"])]),_:1}),u(R,{pageTitle:e.electorate.name,pageSubtitle:e.electorate.description},null,8,["pageTitle","pageSubtitle"]),K,s("div",O,[(e.electorate.status==="current"||e.electorate.status==="retiring")&&e.electorate.incumbent?(a(),c("div",Q,[s("div",Y,[s("div",Z,[$,u(E,{person:e.electorate.incumbent},null,8,["person"])])])])):l("",!0),e.electorate.status!=="current"?(a(),c("div",ee,[s("div",te,[s("div",se,[e.electorate.status==="retiring"?(a(),k(w,{key:0},{default:m(()=>[s("h5",null,[d("This electorate is retiring"),e.electorate.valid_to?(a(),c("span",oe," on "+h(e.formatDate(e.electorate.valid_to)),1)):l("",!0),d(".")]),e.electorate.replaced_by?(a(),c("p",re,[d("The electorate of "+h(e.electorate.name)+" will be replaced by ",1),u(g,{to:"/electorates/"+e.electorate.replaced_by.slug},{default:m(()=>[d(h(e.electorate.replaced_by.name),1)]),_:1},8,["to"]),d(".")])):l("",!0)]),_:1})):l("",!0),e.electorate.status==="former"?(a(),k(w,{key:1},{default:m(()=>[s("h5",null,[d("This electorate retired"),e.electorate.valid_to?(a(),c("span",ae," on "+h(e.formatDate(e.electorate.valid_to)),1)):l("",!0),d(".")]),e.electorate.replaced_by?(a(),c("p",ne,[d("The electorate of "+h(e.electorate.name)+" has been replaced by ",1),u(g,{to:"/electorates/"+e.electorate.replaced_by.slug},{default:m(()=>[d(h(e.electorate.replaced_by.name),1)]),_:1},8,["to"]),d(".")])):l("",!0)]),_:1})):l("",!0)])])])):l("",!0),s("div",ce,[s("div",le,[ie,s("div",de,[P(s("input",{class:"form-check-input",type:"checkbox",value:"","onUpdate:modelValue":o[0]||(o[0]=r=>i.showReasons=r),id:"showReasons"},null,512),[[N,i.showReasons]]),_e])]),s("div",he,[u(w,null,{default:m(()=>[(a(!0),c(H,null,C(e.affiliations,(r,y)=>(a(),c("div",{key:r.id},[u(g,{class:"NuxtLink",to:"/people/"+r.person.slug},{default:m(()=>[y==0||e.affiliations[y].person.id!=e.affiliations[y-1].person.id?(a(),c("div",ue,[r.person.image?(a(),c("div",pe,[s("div",me,[r.person.image?(a(),c("img",{key:0,src:r.person.image,class:"me-3 person-image",alt:r.person.display_name},null,8,fe)):l("",!0)]),s("div",ye,[s("h5",null,[s("strong",null,h(r.person.display_name),1)]),s("p",ve,[r.person.colour?(a(),k(q,{key:0,colour:r.person.colour},null,8,["colour"])):l("",!0),d(" Currently: "+h(r.person.description),1)])])])):(a(),c("div",ge,[s("h6",null,[s("strong",null,h(r.person.display_name),1)]),s("p",we,[r.person.colour?(a(),k(I,{key:0,colour:r.person.colour},null,8,["colour"])):l("",!0),d(" Currently: "+h(r.person.description),1)])]))])):l("",!0),s("div",ke,[Se,s("div",be,[s("div",xe,[s("div",Re,[Ee,d(" "+h(e.formatDate(r.start_date))+" ",1),i.showReasons&&r.start_reason_desc?(a(),c("h6",qe,"Reason: ")):l("",!0),i.showReasons&&r.start_reason_desc?(a(),c("span",Ie,h(r.start_reason_desc),1)):l("",!0)]),r.end_date?(a(),c("div",Me,[Te,d(" "+h(e.formatDate(r.end_date))+" ",1),i.showReasons&&r.end_reason_desc?(a(),c("h6",Pe,"Reason: ")):l("",!0),i.showReasons&&r.end_reason_desc?(a(),c("span",Ne,h(r.end_reason_desc),1)):l("",!0)])):l("",!0)]),y<e.affiliations.length-1&&e.affiliations[y].person.id==e.affiliations[y+1].person.id?(a(),c("hr",Be)):l("",!0)])]),y<e.affiliations.length-1&&e.affiliations[y].person.id!=e.affiliations[y+1].person.id?(a(),c("hr",De)):l("",!0)]),_:2},1032,["to"])]))),128)),He,Ce]),_:1})])]),e.electorate.replaced_electorate?(a(),c("div",Ve,[s("div",Fe,[s("div",We,[Ae,u(w,null,{default:m(()=>[s("h5",null,[d("This electorate replaced the "),u(g,{to:"/electorates/"+e.electorate.replaced_electorate.slug},{default:m(()=>[d(h(e.electorate.replaced_electorate.name),1)]),_:1},8,["to"]),d(" electorate on "+h(e.formatDate(e.electorate.valid_from))+".",1)]),s("p",null,[d("See "),u(g,{to:"/electorates/"+e.electorate.replaced_electorate.slug},{default:m(()=>[d(h(e.electorate.replaced_electorate.name),1)]),_:1},8,["to"]),d(" for more former MPs.")])]),_:1})])])])):l("",!0)])])):l("",!0)}const Je=T(G,[["render",Le],["__scopeId","data-v-d4b8fde5"]]);export{Je as default};
