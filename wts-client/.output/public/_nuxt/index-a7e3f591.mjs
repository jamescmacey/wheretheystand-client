import{_ as I}from"./PageHeader-953c8854.mjs";import{_ as E}from"./PersonCard-945796f8.mjs";import{_ as j,N as H,g as V,p as B,r as b,o as s,c as a,a as _,w as u,b as t,l as v,h as c,G as W,J,m as L,q as F,d as q,F as x,i as S,t as l,e as n,j as z}from"./entry-6994fce1.mjs";import{_ as M}from"./ColourDot-36430abb.mjs";const X={name:"Electorate",setup(){return{electoratesStore:H()}},data(){return{showReasons:!1}},created(){this.electoratesStore.fetch(this.$route.params.id),this.electoratesStore.fetchHistory(this.$route.params.id),this.electoratesStore.fetchShape(this.$route.params.id)},computed:{electorate(){return this.electoratesStore.byIdentifier(this.$route.params.id)},affiliations(){return this.electoratesStore.historyByIdentifier(this.$route.params.id)},shape(){return this.electoratesStore.shapeByIdentifier(this.$route.params.id)},paths(){if(!this.shape||this.shape["wts-comment"]=="noshape")return[];var r=this.shape.features[0];if(r.geometry.type=="Polygon")return this.shape.features[0].geometry.coordinates;if(r.geometry.type=="MultiPolygon"){var d=[];return this.shape.features[0].geometry.coordinates.forEach(m=>{d.push(m[0])}),d}},limits(){if(!(!this.shape||this.shape["wts-comment"]=="noshape")){var r=-180,d=0,m=0,k=360;return this.paths.forEach(y=>{y.forEach(e=>{var i=e[0],f=e[1];i<0&&(i=i+360),i>m&&(m=i),i<k&&(k=i),f>r&&(r=f),f<d&&(d=f)})}),m>180&&(m=m-360),{north:r,south:d,east:m,west:k}}},center(){if(this.limits){var r=this.limits.east;r<0&&(r=r+360);var d=(r+this.limits.west)/2;return d>180&&(d=d-360),[d,(this.limits.north+this.limits.south)/2]}else return[0,0]}},methods:{formatDate(r){return V(B(r,"yyyy-MM-dd",new Date),"d MMMM yyyy")}},watch:{$route(r,d){r.fullPath.startsWith("/electorates/")&&(this.electoratesStore.fetch(r.params.id),this.electoratesStore.fetchHistory(r.params.id),this.electoratesStore.fetchShape(r.params.id))}},mounted(){}},p=r=>(L("data-v-39bea13c"),r=r(),F(),r),Y={key:0,id:"electorate-view"},Z={class:"container-fluid hero pt-0"},G={class:"mt-3 container"},A={key:0},K={class:"row"},U={class:"col-12 col-xl-4"},O=p(()=>t("h4",null,"Incumbent Member of Parliament",-1)),Q={key:1},$={class:"row"},ee={class:"col-12"},te=n("This electorate is retiring"),se={key:0},oe=n("."),re={key:0},ae=n("."),ce=n("This electorate retired"),ne={key:0},le=n("."),de={key:0},_e=n("."),ie={class:"row"},he={class:"col-12"},ue=p(()=>t("h4",null,"Previous MPs",-1)),me={class:"form-check"},pe=p(()=>t("label",{class:"form-check-label",for:"showReasons"}," Show reasons for commencement and conclusion of terms ",-1)),ye={class:"col-12"},fe={key:0},ve={key:0,class:"d-flex align-items-center"},ge={class:"flex-shrink-0"},ke=["src","alt"],we={class:"flex-grow-1 ms-3"},be={class:"text-muted"},xe={key:1},Se={class:"text-muted person-description"},Me={class:"row"},Te=p(()=>t("div",{class:"col-1"},null,-1)),Re={class:"col-11"},Ne={class:"row"},Pe={class:"col-12 col-md-6"},Ce=p(()=>t("h6",{class:"affiliation-date-heading"},"Started:",-1)),De={key:0,class:"affiliation-date-heading"},Ie={key:1},Ee={key:0,class:"col-12 col-md-6"},je=p(()=>t("h6",{class:"affiliation-date-heading"},"Ended:",-1)),He={key:0,class:"affiliation-date-heading"},Ve={key:1},Be={key:0},We={key:1},Je=p(()=>t("hr",null,null,-1)),Le=p(()=>t("p",{class:"text-muted"},"These dates correspond to when an MP was eligible to sit and vote in the House of Representatives, not when they were declared elected. This list only includes MPs with profiles on WhereTheyStand, so it may contain some gaps.",-1)),Fe={key:2},qe={class:"row"},ze={class:"col-12"},Xe=p(()=>t("h4",null,"History",-1)),Ye=n("This electorate replaced the "),Ze=n("See "),Ge=n(" for more former MPs.");function Ae(r,d,m,k,y,e){const i=b("Meta"),f=b("Head"),T=I,R=b("mapbox-geogeometry-polygon"),N=b("mapbox-map"),P=E,g=z,w=q,C=M,D=M;return e.electorate?(s(),a("div",Y,[_(f,null,{default:u(()=>[_(i,{name:"twitter:title",content:e.electorate.name+"- WhereTheyStand"},null,8,["content"]),_(i,{name:"twitter:description",content:e.electorate.description},null,8,["content"]),_(i,{name:"description",content:e.electorate.description},null,8,["content"]),_(i,{property:"og:title",content:e.electorate.name+"- WhereTheyStand"},null,8,["content"]),_(i,{property:"og:description",content:e.electorate.description},null,8,["content"])]),_:1}),_(T,{pageTitle:e.electorate.name,pageSubtitle:e.electorate.description},null,8,["pageTitle","pageSubtitle"]),t("div",Z,[e.shape&&e.shape["wts-comment"]!="noshape"?(s(),v(N,{key:0,accessToken:"pk.eyJ1IjoiamFtZXNjbWFjZXkiLCJhIjoiY2xiN2VhYzVqMGE5YTN2bnhuM3l6d3pxbyJ9.CN_c4Tf7wXMtxyLKWrtvJg",height:"500px",mapStyle:"mapbox://styles/jamescmacey/clef24lj5000b01mlaqsjy2dl",customAttribution:["Representation Commission","Stats NZ","Electoral Commission"],center:e.center,zoom:9,autoResize:!0},{default:u(()=>[(s(!0),a(x,null,S(e.paths,(o,h)=>(s(),v(R,{key:h,path:o,opacity:.2},null,8,["path","opacity"]))),128))]),_:1},8,["center"])):c("",!0)]),t("div",G,[(e.electorate.status==="current"||e.electorate.status==="retiring")&&e.electorate.incumbent?(s(),a("div",A,[t("div",K,[t("div",U,[O,_(P,{person:e.electorate.incumbent},null,8,["person"])])])])):c("",!0),e.electorate.status!=="current"?(s(),a("div",Q,[t("div",$,[t("div",ee,[e.electorate.status==="retiring"?(s(),v(w,{key:0},{default:u(()=>[t("h5",null,[te,e.electorate.valid_to?(s(),a("span",se," on "+l(e.formatDate(e.electorate.valid_to)),1)):c("",!0),oe]),e.electorate.replaced_by?(s(),a("p",re,[n("The electorate of "+l(e.electorate.name)+" will be replaced by ",1),_(g,{to:"/electorates/"+e.electorate.replaced_by.slug},{default:u(()=>[n(l(e.electorate.replaced_by.name),1)]),_:1},8,["to"]),ae])):c("",!0)]),_:1})):c("",!0),e.electorate.status==="former"?(s(),v(w,{key:1},{default:u(()=>[t("h5",null,[ce,e.electorate.valid_to?(s(),a("span",ne," on "+l(e.formatDate(e.electorate.valid_to)),1)):c("",!0),le]),e.electorate.replaced_by?(s(),a("p",de,[n("The electorate of "+l(e.electorate.name)+" has been replaced by ",1),_(g,{to:"/electorates/"+e.electorate.replaced_by.slug},{default:u(()=>[n(l(e.electorate.replaced_by.name),1)]),_:1},8,["to"]),_e])):c("",!0)]),_:1})):c("",!0)])])])):c("",!0),t("div",ie,[t("div",he,[ue,t("div",me,[W(t("input",{class:"form-check-input",type:"checkbox",value:"","onUpdate:modelValue":d[0]||(d[0]=o=>y.showReasons=o),id:"showReasons"},null,512),[[J,y.showReasons]]),pe])]),t("div",ye,[_(w,null,{default:u(()=>[(s(!0),a(x,null,S(e.affiliations,(o,h)=>(s(),a("div",{key:o.id},[_(g,{class:"NuxtLink",to:"/people/"+o.person.slug},{default:u(()=>[h==0||e.affiliations[h].person.id!=e.affiliations[h-1].person.id?(s(),a("div",fe,[o.person.image?(s(),a("div",ve,[t("div",ge,[o.person.image?(s(),a("img",{key:0,src:o.person.image,class:"me-3 person-image",alt:o.person.display_name},null,8,ke)):c("",!0)]),t("div",we,[t("h5",null,[t("strong",null,l(o.person.display_name),1)]),t("p",be,[o.person.colour?(s(),v(C,{key:0,colour:o.person.colour},null,8,["colour"])):c("",!0),n(" Currently: "+l(o.person.description),1)])])])):(s(),a("div",xe,[t("h6",null,[t("strong",null,l(o.person.display_name),1)]),t("p",Se,[o.person.colour?(s(),v(D,{key:0,colour:o.person.colour},null,8,["colour"])):c("",!0),n(" Currently: "+l(o.person.description),1)])]))])):c("",!0),t("div",Me,[Te,t("div",Re,[t("div",Ne,[t("div",Pe,[Ce,n(" "+l(e.formatDate(o.start_date))+" ",1),y.showReasons&&o.start_reason_desc?(s(),a("h6",De,"Reason: ")):c("",!0),y.showReasons&&o.start_reason_desc?(s(),a("span",Ie,l(o.start_reason_desc),1)):c("",!0)]),o.end_date?(s(),a("div",Ee,[je,n(" "+l(e.formatDate(o.end_date))+" ",1),y.showReasons&&o.end_reason_desc?(s(),a("h6",He,"Reason: ")):c("",!0),y.showReasons&&o.end_reason_desc?(s(),a("span",Ve,l(o.end_reason_desc),1)):c("",!0)])):c("",!0)]),h<e.affiliations.length-1&&e.affiliations[h].person.id==e.affiliations[h+1].person.id?(s(),a("hr",Be)):c("",!0)])]),h<e.affiliations.length-1&&e.affiliations[h].person.id!=e.affiliations[h+1].person.id?(s(),a("hr",We)):c("",!0)]),_:2},1032,["to"])]))),128)),Je,Le]),_:1})])]),e.electorate.replaced_electorate?(s(),a("div",Fe,[t("div",qe,[t("div",ze,[Xe,_(w,null,{default:u(()=>[t("h5",null,[Ye,_(g,{to:"/electorates/"+e.electorate.replaced_electorate.slug},{default:u(()=>[n(l(e.electorate.replaced_electorate.name),1)]),_:1},8,["to"]),n(" electorate on "+l(e.formatDate(e.electorate.valid_from))+".",1)]),t("p",null,[Ze,_(g,{to:"/electorates/"+e.electorate.replaced_electorate.slug},{default:u(()=>[n(l(e.electorate.replaced_electorate.name),1)]),_:1},8,["to"]),Ge])]),_:1})])])])):c("",!0)])])):c("",!0)}var $e=j(X,[["render",Ae],["__scopeId","data-v-39bea13c"]]);export{$e as default};
